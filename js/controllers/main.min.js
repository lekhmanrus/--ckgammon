"use strict";angular.module("--ckgammonApp.controllers").controller("MainController",["$scope","$timeout","Type","Board","Dice",function(e,o,s,a,t){var i=void 0,u=void 0,n=1500,l=function(){e.dices={red:{value:void 0,rolled:void 0},black:{value:void 0,rolled:void 0}},i=void 0,u=void 0};l();var r={red:"black",black:"red"};e.roll=function(s){e.dices[s].value||e.dices[r[s]].rolled&&!u||(u?e.dices[s].value=t.roll():(i=s,e.dices[s].value=t.roll(),e.dices[s].rolled=!0,o(function(){"human"!=e.usersData.two.type?e.dices[r[s]].value=t.roll():u=!0},n)),u=!1)},e.$watch("[dices.red.value, dices.black.value]",function(){e.dices.red.value&&e.dices.black.value&&(e.dices.red.value==e.dices.black.value?o(function(){l()},n):(a.moveOwner=a.first=e.dices[i].value>e.dices[r[i]].value?s.playerOneType:s.playerTwoType,o(function(){e.statusDices=!1,a.isMoving=!1},n)))}),e.$watch(function(){return a.isMoving},function(o){void 0!==o&&(e.statusDiceGroup=!o)}),e.$watch(function(){return a.one.house.inHouse},function(o){e.statusPlayerOneHouse=o}),e.$watch(function(){return a.two.house.inHouse},function(o){e.statusPlayerTwoHouse=o}),e.$watch(function(){return a.win},function(o){void 0!=o&&(e.win=e.usersData.one.color==o?"one":e.usersData.two.color==o?"two":o,e.statusNewGameDialogClose=!1,e.showNewGameDialog())}),e.diceGroupValues=[void 0,void 0];var c=!1;e.rollGroup=function(){c||(c=!0,e.diceGroupValues=[void 0,void 0],o(function(){e.diceGroupValues[0]=t.roll(),e.diceGroupValues[1]=t.roll()}),o(function(){a.isMoving=!0,a.setMoves(e.diceGroupValues),c=!1},n+500))},e.statusDices=!0,e.statusDiceGroup=!1,e.statusNewGameDialog=!0,e.statusNewGameDialogClose=!1,e.statusPlayerOneHouse=!1,e.statusPlayerTwoHouse=!1,e.win=!1,e.showNewGameDialog=function(){e.statusNewGameDialog=!0},e.hideNewGameDialog=function(){e.statusNewGameDialog=!1},e.colors=s.data,e.usersData={one:{name:"L",color:void 0},two:{name:"KIRA",color:void 0,type:"human"}},e.chooseColor=function(o){e.usersData.one.color=o,e.usersData.two.color=s.getOppositeType(o)},e.$watch("usersData.two.type",function(o){e.usersData.two.type=o}),e.newGame=function(){s.setPlayerOneType(e.usersData.one.color),a.initCheckers(),e.statusNewGameDialog=!1,e.statusNewGameDialogClose=a.existsCheckers,e.statusDices=!0,e.statusDiceGroup=!1,a.isMoving=void 0,a.moveOwner=!1,a.first=void 0,a.win=void 0,a.lastMove=void 0,a.one.house.inHouse=!1,a.two.house.inHouse=!1,e.statusPlayerOneHouse=!1,e.statusPlayerTwoHouse=!1,a.one.thrown=[],a.two.thrown=[],e.win=!1,l()},e.isDisabled=function(){return!(e.usersData.one.color&&e.usersData.two.color&&e.usersData.one.name&&e.usersData.two.name&&e.usersData.two.type)}}]);